<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sube tu foto - Vigilia Aviva tu Luz</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background-color: #fdf6e3; padding: 20px; }
  h1 { color: #ff8c00; }
  input[type="file"] { margin: 20px 0; }
  button { background-color: #ff8c00; color: white; border: none; padding: 10px 20px; cursor: pointer; font-size: 16px; }
  button:hover { background-color: #e07b00; }
  #message { font-weight: bold; color: green; margin-top: 20px; }
</style>
</head>
<body>

<h1>üì∏ Sube tu foto - Vigilia ‚ÄúAviva tu Luz‚Äù</h1>
<p>Escanea el QR, selecciona tus fotos y s√∫belas aqu√≠ para compartirlas con todos.</p>

<input type="file" id="fileInput" accept="image/*" multiple>
<br>
<button onclick="uploadPhoto()">Subir Fotos</button>

<p id="message"></p>

<script>
async function uploadPhoto() {
    const fileInput = document.getElementById('fileInput');
    const files = fileInput.files;

    if (files.length === 0) {
        alert('Por favor selecciona al menos una foto.');
        return;
    }

    const apiKey = '4116419b71936bf9cf09553e50b79efe';
    const url = `https://api.imgbb.com/1/upload?key=${apiKey}`;
    let success = true;

    for (let i = 0; i < files.length; i++) {
        const formData = new FormData();
        formData.append('image', files[i]);

        try {
            const response = await fetch(url, {
                method: 'POST',
                body: formData
            });
            const data = await response.json();
            if (!data.success) {
                success = false;
            }
        } catch (error) {
            success = false;
        }
    }

    if (success) {
        document.getElementById('message').innerHTML = "‚úÖ Fotos subidas con √©xito";
    } else {
        document.getElementById('message').innerHTML = "‚ùå Ocurri√≥ un error al subir algunas fotos";
    }
}
</script>

</body>
</html>
